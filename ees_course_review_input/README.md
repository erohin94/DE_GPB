# **Витрина отзывов на курсы**

**Требования к витрине**

**Первичный расчет витрины:** Исторические данные с 07.02.2020 года (на основе минимальной даты отзывов в источнике dm_webtutor_hdp.HR_edu_response).

**Дальнейший расчет витрины:** Ежемесячно, полный пересчет витрины (снепшот).

**Обновление данных:** Обновление данных производить после готовности данных по всем источникам в первых числах нового месяца за предыдущий месяц.

**Регламентное время готовности данных:** нет.

**Ограничения по расчету:** Данные в витрине могут быть обновлены после обновления данных в источниках.


# **Общее описание**

Для работы модели формирования описания курсов портала Импульс на основе отзывов сотрудников, уже прошедших курс требуется разработка новой витрины данных с отзывами на курсы.

В рамках входной витрины для модели используются данные по курсам и отзывам на курсы. При этом отзывы отбираются по следующему условию:

1.Пишем текст по последним отзывам.

2.Используем не более 500 последних отзывов.

3.Если отзывов меньше 10, то пропускаем.

4.Если отзывы копятся постепенно, но 500 отзывов набираются только за год, то ограничиваем отзывы только последними 150 днями.
В этом случае, если отзывов более 10 штук, то берем отзывы за последние 150 дней.
Например, за 150 дней всего 12 отзывов, в витрину попадают только они.

5.Если у курса за 150 дней меньше 10 отзывов и меньше 10 содержательных отзывов (длиной менее 50 символов) то снимаем ограничение по периоду и добираем отзывы, при этом в результирующей выборке после добора, их так же должно быть меньше 500.

6.Короткие отзывы в витрине оставляем (просто не учитываем их в правиле отбора).

7.Если после добавления старых отзывов всё равно остается менее 10 содержательных отзывов для какого-то курса, то такой курс в витрину не берем.

8.При отмене ограничения на период, в подсчете учитывать только содержательные отзывы, так как много приходит отзывов по типу «+», «Д», «123», «>», «ок» и т.д.

9.Оставляем отзывы, которые по длине больше 6 символов.

Дата отзыва берется из источника по отзывам dm_webutor_hdp.HR_edu_response поле response_date. Группировка отзывов по курсу в уже готовой витрине производится по полю object_id – уникальный идентификатор курса
